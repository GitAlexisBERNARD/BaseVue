"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),b="--vc-auto-duration",F=`height var(${b}) cubic-bezier(0.33, 1, 0.68, 1)`,p={padding:0},E=300,I={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function w(n){return n.value?parseFloat(getComputedStyle(n.value).height):0}function _(n){var a;return{height:`${((a=n.value)==null?void 0:a.scrollHeight)||0}px`}}function C(n){if(!n.value)return{};const{transition:a}=getComputedStyle(n.value);return a==="all 0s ease 0s"?{transition:F}:{transition:a}}function D(n){if(!n.value)return!0;const{transition:a}=getComputedStyle(n.value);return typeof window.requestAnimationFrame>"u"||matchMedia("(prefers-reduced-motion: reduce)").matches||a.includes("none")||a.includes("height 0s")}function L(n=0){if(n===0)return 0;const a=n/36,i=Math.round((4+15*a**.25+a/5)*10);return Number.isFinite(i)?i:0}const N=e.defineComponent({inheritAttrs:!0,__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(n,{emit:a}){const i=n,c=a,u=e.toRef(i,"when"),l=e.toRef(i,"baseHeight"),f=e.computed(()=>({overflow:"hidden",height:`${l.value}px`})),v=e.computed(()=>({...p,...l.value===0?{display:"none"}:f.value})),o=e.ref(null),h=e.ref(u.value?"expanded":"collapsed"),d=t=>h.value=t;function R(){return u.value?p:l.value===0?I:v.value}const g=e.shallowRef(R()),r=t=>g.value=t,s=t=>r({...g.value,...t}),y=e.ref(E),T=t=>y.value=t,S=e.computed(()=>({[b]:`${y.value}ms`}));function x(){r(p),d("expanded"),c("expanded")}function A(){r(v.value),d("collapsed"),c("collapsed")}e.onMounted(()=>{if(!o.value)return;const t=L(o.value.scrollHeight-l.value);t>0&&T(t),!u.value&&l.value===0&&r(v.value)}),e.watch(u,t=>{if(t){if(D(o))return x();d("expanding"),c("expand"),r({...p,...f.value,...S.value}),requestAnimationFrame(()=>{s({..._(o),...C(o),willChange:"height"})})}else{if(D(o))return A();d("collapsing"),c("collapse"),s({...S.value,..._(o)}),requestAnimationFrame(()=>{s({...f.value,...C(o),willChange:"height"})})}}),e.watch(l,t=>{u.value||(t>0?s({display:void 0,height:`${t}px`}):s({display:"none"}))});function H(t){var m;t.target===o.value&&t.propertyName==="height"&&(u.value?((m=o.value)==null?void 0:m.scrollHeight)===w(o)&&x():l.value===w(o)&&A())}return(t,m)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(i.as),{ref_key:"collapseRef",ref:o,style:e.normalizeStyle(g.value),onTransitionend:H,"data-collapse":h.value},{default:e.withCtx(()=>[e.renderSlot(t.$slots,"default",e.normalizeProps(e.guardReactiveProps({state:h.value})))]),_:3},40,["style","data-collapse"]))}});exports.Collapse=N;
